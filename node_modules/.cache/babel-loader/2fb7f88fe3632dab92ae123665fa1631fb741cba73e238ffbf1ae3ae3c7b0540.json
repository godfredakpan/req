{"ast":null,"code":"import colons from './1st-pass/01-colons.js';\nimport hyphens from './1st-pass/02-hyphens.js';\nimport tagSwitch from './2nd-pass/00-tagSwitch.js';\nimport checkCase from './2nd-pass/01-case.js';\nimport checkSuffix from './2nd-pass/02-suffix.js';\nimport checkRegex from './2nd-pass/03-regex.js';\nimport checkPrefix from './2nd-pass/04-prefix.js';\nimport checkYear from './2nd-pass/05-year.js';\nimport verbType from './3rd-pass/06-verb-type.js';\nimport fillTags from './3rd-pass/_fillTags.js';\nimport checkAcronym from './3rd-pass/01-acronym.js';\nimport neighbours from './3rd-pass/02-neighbours.js';\nimport orgWords from './3rd-pass/03-orgWords.js';\nimport nounFallback from './3rd-pass/04-fallback.js';\nimport switches from './3rd-pass/06-switches.js';\nimport imperative from './3rd-pass/07-imperative.js';\n\n// is it all yelling-case?\nconst ignoreCase = function (terms) {\n  // allow 'John F Kennedy'\n  if (terms.filter(t => !t.tags.has('ProperNoun')).length <= 3) {\n    return false;\n  }\n  const lowerCase = /^[a-z]/;\n  return terms.every(t => !lowerCase.test(t.text));\n};\n\n// taggers with no clause-splitting\nconst firstPass = function (docs, model, world) {\n  docs.forEach(terms => {\n    // check whitespace/punctuation\n    colons(terms, 0, model, world);\n    for (let i = 0; i < terms.length; i += 1) {\n      // hard-nosed, faith-based\n      // hyphens(terms, i, model, world)\n    }\n  });\n};\n\n// these methods don't care about word-neighbours\nconst secondPass = function (terms, model, world, isYelling) {\n  for (let i = 0; i < terms.length; i += 1) {\n    // mark Noun|Verb on term metadata\n    tagSwitch(terms, i, model);\n    //  is it titlecased?\n    if (isYelling === false) {\n      checkCase(terms, i, model);\n    }\n    // look at word ending\n    checkSuffix(terms, i, model);\n    // try look-like rules\n    checkRegex(terms, i, model, world);\n    // check for recognized prefix, like 'micro-'\n    checkPrefix(terms, i, model);\n    // turn '1993' into a year\n    checkYear(terms, i, model);\n  }\n};\n\n// neighbour-based tagging\nconst thirdPass = function (terms, model, world, isYelling) {\n  for (let i = 0; i < terms.length; i += 1) {\n    // let these tags get layered\n    let found = checkAcronym(terms, i, model);\n    // deduce parent tags\n    fillTags(terms, i, model);\n    // look left+right for hints\n    found = found || neighbours(terms, i, model);\n    //  ¯\\_(ツ)_/¯ - found nothing\n    found = found || nounFallback(terms, i, model);\n  }\n  for (let i = 0; i < terms.length; i += 1) {\n    // Johnson LLC\n    orgWords(terms, i, world, isYelling);\n    // verb-noun disambiguation, etc\n    switches(terms, i, world);\n    // give bare verbs more tags\n    verbType(terms, i, model, world);\n    // hard-nosed\n    hyphens(terms, i, model, world);\n  }\n  // place tea bags\n  imperative(terms, world);\n};\nconst preTagger = function (view) {\n  const {\n    methods,\n    model,\n    world\n  } = view;\n  let docs = view.docs;\n  // try some early stuff\n  firstPass(docs, model, world);\n  // roughly split sentences up by clause\n  let document = methods.two.quickSplit(docs);\n  // start with all terms\n  for (let n = 0; n < document.length; n += 1) {\n    let terms = document[n];\n    // is it all upper-case?\n    const isYelling = ignoreCase(terms);\n    // guess by the letters\n    secondPass(terms, model, world, isYelling);\n    // guess by the neighbours\n    thirdPass(terms, model, world, isYelling);\n  }\n  return document;\n};\nexport default preTagger;","map":{"version":3,"names":["colons","hyphens","tagSwitch","checkCase","checkSuffix","checkRegex","checkPrefix","checkYear","verbType","fillTags","checkAcronym","neighbours","orgWords","nounFallback","switches","imperative","ignoreCase","terms","filter","t","tags","has","length","lowerCase","every","test","text","firstPass","docs","model","world","forEach","i","secondPass","isYelling","thirdPass","found","preTagger","view","methods","document","two","quickSplit","n"],"sources":["/Users/godfredakpan/Documents/signature_generator/signature_generator/node_modules/compromise/src/2-two/preTagger/compute/tagger/index.js"],"sourcesContent":["import colons from './1st-pass/01-colons.js'\nimport hyphens from './1st-pass/02-hyphens.js'\n\nimport tagSwitch from './2nd-pass/00-tagSwitch.js'\nimport checkCase from './2nd-pass/01-case.js'\nimport checkSuffix from './2nd-pass/02-suffix.js'\nimport checkRegex from './2nd-pass/03-regex.js'\nimport checkPrefix from './2nd-pass/04-prefix.js'\nimport checkYear from './2nd-pass/05-year.js'\nimport verbType from './3rd-pass/06-verb-type.js'\n\nimport fillTags from './3rd-pass/_fillTags.js'\nimport checkAcronym from './3rd-pass/01-acronym.js'\nimport neighbours from './3rd-pass/02-neighbours.js'\nimport orgWords from './3rd-pass/03-orgWords.js'\nimport nounFallback from './3rd-pass/04-fallback.js'\nimport switches from './3rd-pass/06-switches.js'\nimport imperative from './3rd-pass/07-imperative.js'\n\n// is it all yelling-case?\nconst ignoreCase = function (terms) {\n  // allow 'John F Kennedy'\n  if (terms.filter(t => !t.tags.has('ProperNoun')).length <= 3) {\n    return false\n  }\n  const lowerCase = /^[a-z]/\n  return terms.every(t => !lowerCase.test(t.text))\n}\n\n// taggers with no clause-splitting\nconst firstPass = function (docs, model, world) {\n  docs.forEach(terms => {\n    // check whitespace/punctuation\n    colons(terms, 0, model, world)\n\n    for (let i = 0; i < terms.length; i += 1) {\n      // hard-nosed, faith-based\n      // hyphens(terms, i, model, world)\n    }\n  })\n}\n\n// these methods don't care about word-neighbours\nconst secondPass = function (terms, model, world, isYelling) {\n  for (let i = 0; i < terms.length; i += 1) {\n    // mark Noun|Verb on term metadata\n    tagSwitch(terms, i, model)\n    //  is it titlecased?\n    if (isYelling === false) {\n      checkCase(terms, i, model)\n    }\n    // look at word ending\n    checkSuffix(terms, i, model)\n    // try look-like rules\n    checkRegex(terms, i, model, world)\n    // check for recognized prefix, like 'micro-'\n    checkPrefix(terms, i, model)\n    // turn '1993' into a year\n    checkYear(terms, i, model)\n  }\n}\n\n// neighbour-based tagging\nconst thirdPass = function (terms, model, world, isYelling) {\n  for (let i = 0; i < terms.length; i += 1) {\n    // let these tags get layered\n    let found = checkAcronym(terms, i, model)\n    // deduce parent tags\n    fillTags(terms, i, model)\n    // look left+right for hints\n    found = found || neighbours(terms, i, model)\n    //  ¯\\_(ツ)_/¯ - found nothing\n    found = found || nounFallback(terms, i, model)\n  }\n  for (let i = 0; i < terms.length; i += 1) {\n    // Johnson LLC\n    orgWords(terms, i, world, isYelling)\n    // verb-noun disambiguation, etc\n    switches(terms, i, world)\n    // give bare verbs more tags\n    verbType(terms, i, model, world)\n    // hard-nosed\n    hyphens(terms, i, model, world)\n  }\n  // place tea bags\n  imperative(terms, world)\n}\n\nconst preTagger = function (view) {\n  const { methods, model, world } = view\n  let docs = view.docs\n  // try some early stuff\n  firstPass(docs, model, world)\n  // roughly split sentences up by clause\n  let document = methods.two.quickSplit(docs)\n  // start with all terms\n  for (let n = 0; n < document.length; n += 1) {\n    let terms = document[n]\n    // is it all upper-case?\n    const isYelling = ignoreCase(terms)\n    // guess by the letters\n    secondPass(terms, model, world, isYelling)\n    // guess by the neighbours\n    thirdPass(terms, model, world, isYelling)\n  }\n  return document\n}\n\nexport default preTagger\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}