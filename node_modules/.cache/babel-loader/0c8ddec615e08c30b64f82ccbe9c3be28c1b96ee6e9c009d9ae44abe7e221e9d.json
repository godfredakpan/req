{"ast":null,"code":"import press from './press.js';\nimport { unIndex } from '../_lib.js';\n\n// remove shared data in key-val pairs\n// uses an ad-hoc run-length encoding format \n// {walk: walking}  -> {walk: '.4ing'}\nconst pressPairs = function (pairs) {\n  pairs = pairs.map(a => {\n    return press(a[0], a[1]).join('|');\n  });\n  return pairs.join(',');\n};\nconst compress = function () {\n  let model = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  model = Object.assign({}, model);\n\n  // compress fwd rules\n  model.rules = unIndex(model.rules);\n  model.rules = pressPairs(model.rules);\n  // compress reverse rules\n  if (model.rev) {\n    model.rev = unIndex(model.rev);\n    model.rev = pressPairs(model.rev);\n  }\n\n  // compress exceptions\n  model.exceptions = Object.entries(model.exceptions);\n  model.exceptions = pressPairs(model.exceptions);\n  return model;\n};\nexport default compress;","map":{"version":3,"names":["press","unIndex","pressPairs","pairs","map","a","join","compress","model","Object","assign","rules","rev","exceptions","entries"],"sources":["/Users/godfredakpan/Documents/signature_generator/signature_generator/node_modules/suffix-thumb/src/compress/index.js"],"sourcesContent":["import press from './press.js'\nimport { unIndex } from '../_lib.js'\n\n// remove shared data in key-val pairs\n// uses an ad-hoc run-length encoding format \n// {walk: walking}  -> {walk: '.4ing'}\nconst pressPairs = function (pairs) {\n  pairs = pairs.map(a => {\n    return press(a[0], a[1]).join('|')\n  })\n  return pairs.join(',')\n}\n\nconst compress = function (model = {}) {\n  model = Object.assign({}, model)\n\n  // compress fwd rules\n  model.rules = unIndex(model.rules)\n  model.rules = pressPairs(model.rules)\n  // compress reverse rules\n  if (model.rev) {\n    model.rev = unIndex(model.rev)\n    model.rev = pressPairs(model.rev)\n  }\n\n  // compress exceptions\n  model.exceptions = Object.entries(model.exceptions)\n  model.exceptions = pressPairs(model.exceptions)\n  return model\n}\nexport default compress"],"mappings":"AAAA,OAAOA,KAAK,MAAM,YAAY;AAC9B,SAASC,OAAO,QAAQ,YAAY;;AAEpC;AACA;AACA;AACA,MAAMC,UAAU,GAAG,UAAUC,KAAK,EAAE;EAClCA,KAAK,GAAGA,KAAK,CAACC,GAAG,CAACC,CAAC,IAAI;IACrB,OAAOL,KAAK,CAACK,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC;EACpC,CAAC,CAAC;EACF,OAAOH,KAAK,CAACG,IAAI,CAAC,GAAG,CAAC;AACxB,CAAC;AAED,MAAMC,QAAQ,GAAG,YAAsB;EAAA,IAAZC,KAAK,uEAAG,CAAC,CAAC;EACnCA,KAAK,GAAGC,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEF,KAAK,CAAC;;EAEhC;EACAA,KAAK,CAACG,KAAK,GAAGV,OAAO,CAACO,KAAK,CAACG,KAAK,CAAC;EAClCH,KAAK,CAACG,KAAK,GAAGT,UAAU,CAACM,KAAK,CAACG,KAAK,CAAC;EACrC;EACA,IAAIH,KAAK,CAACI,GAAG,EAAE;IACbJ,KAAK,CAACI,GAAG,GAAGX,OAAO,CAACO,KAAK,CAACI,GAAG,CAAC;IAC9BJ,KAAK,CAACI,GAAG,GAAGV,UAAU,CAACM,KAAK,CAACI,GAAG,CAAC;EACnC;;EAEA;EACAJ,KAAK,CAACK,UAAU,GAAGJ,MAAM,CAACK,OAAO,CAACN,KAAK,CAACK,UAAU,CAAC;EACnDL,KAAK,CAACK,UAAU,GAAGX,UAAU,CAACM,KAAK,CAACK,UAAU,CAAC;EAC/C,OAAOL,KAAK;AACd,CAAC;AACD,eAAeD,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}