{"ast":null,"code":"import { Client, query } from 'faunadb';\nimport { FAUNA_SECRET } from './faunaKeys';\nconst createUser = async user => {\n  const q = query;\n  const client = new Client({\n    secret: FAUNA_SECRET\n  });\n  const createUserQuery = client.query(q.Get(q.Match(q.Index('get_user_by_email'), user.email))).then(ret => {\n    return 'userExists';\n  }).catch(err => {\n    const createUser = client.query(q.Create(q.Collection('users'), {\n      data: user,\n      credentials: {\n        password: 'test'\n      }\n    }));\n    return createUser;\n  });\n  return createUserQuery;\n};\nexport default createUser;","map":{"version":3,"names":["Client","query","FAUNA_SECRET","createUser","user","q","client","secret","createUserQuery","Get","Match","Index","email","then","ret","catch","err","Create","Collection","data","credentials","password"],"sources":["/Users/godfredakpan/Documents/projects/AgentReg/src/fauna/createUser.js"],"sourcesContent":["import { Client, query } from 'faunadb'\n\nimport { FAUNA_SECRET } from './faunaKeys'\n\nconst createUser = async (user) => {\n    const q = query\n    const client = new Client({ secret: FAUNA_SECRET, })\n\n    const createUserQuery = client.query(\n        q.Get(q.Match(q.Index('get_user_by_email'), user.email)\n        ))\n        .then((ret) => { return 'userExists' })\n        .catch((err) => {\n            const createUser = client.query(\n                q.Create(q.Collection('users'), { data: user, credentials: { password: 'test' } })\n            )\n            return createUser\n        })\n\n    return createUserQuery\n\n}\n\nexport default createUser"],"mappings":"AAAA,SAASA,MAAM,EAAEC,KAAK,QAAQ,SAAS;AAEvC,SAASC,YAAY,QAAQ,aAAa;AAE1C,MAAMC,UAAU,GAAG,MAAOC,IAAI,IAAK;EAC/B,MAAMC,CAAC,GAAGJ,KAAK;EACf,MAAMK,MAAM,GAAG,IAAIN,MAAM,CAAC;IAAEO,MAAM,EAAEL;EAAc,CAAC,CAAC;EAEpD,MAAMM,eAAe,GAAGF,MAAM,CAACL,KAAK,CAChCI,CAAC,CAACI,GAAG,CAACJ,CAAC,CAACK,KAAK,CAACL,CAAC,CAACM,KAAK,CAAC,mBAAmB,CAAC,EAAEP,IAAI,CAACQ,KAAK,CAAC,CACtD,CAAC,CACDC,IAAI,CAAEC,GAAG,IAAK;IAAE,OAAO,YAAY;EAAC,CAAC,CAAC,CACtCC,KAAK,CAAEC,GAAG,IAAK;IACZ,MAAMb,UAAU,GAAGG,MAAM,CAACL,KAAK,CAC3BI,CAAC,CAACY,MAAM,CAACZ,CAAC,CAACa,UAAU,CAAC,OAAO,CAAC,EAAE;MAAEC,IAAI,EAAEf,IAAI;MAAEgB,WAAW,EAAE;QAAEC,QAAQ,EAAE;MAAO;IAAE,CAAC,CAAC,CACrF;IACD,OAAOlB,UAAU;EACrB,CAAC,CAAC;EAEN,OAAOK,eAAe;AAE1B,CAAC;AAED,eAAeL,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}