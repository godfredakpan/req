{"ast":null,"code":"var _jsxFileName = \"/Users/godfredakpan/Documents/projects/AgentReg/src/components/all_users.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport BootstrapTable from 'react-bootstrap-table-next';\nimport paginationFactory from 'react-bootstrap-table2-paginator';\nimport 'react-bootstrap-table-next/dist/react-bootstrap-table2.min.css';\nimport { Button } from 'react-bootstrap';\nimport { saveAs } from 'file-saver';\nimport * as XLSX from 'xlsx';\nimport getAllUsers from '../fauna/getUsers';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst credentials = {\n  loginCode: 'pUrpLeQWERTY20'\n};\nconst columns = [{\n  dataField: 'fname',\n  text: 'First Name'\n}, {\n  dataField: 'mname',\n  text: 'Middle Name'\n}, {\n  dataField: 'lname',\n  text: 'Last Name'\n}, {\n  dataField: 'gender',\n  text: 'Gender'\n}, {\n  dataField: 'dob',\n  text: 'Date of Birth'\n}, {\n  dataField: 'email',\n  text: 'Email'\n}, {\n  dataField: 'phone',\n  text: 'Phone'\n}, {\n  dataField: 'address',\n  text: 'Address'\n}, {\n  dataField: 'bank_name',\n  text: 'Bank Name'\n}, {\n  dataField: 'account_number',\n  text: 'Acct Number'\n}, {\n  dataField: 'account_name',\n  text: 'Account Name'\n}];\nconst options = {\n  sizePerPage: 10,\n  hideSizePerPage: false,\n  hidePageListOnlyOnePage: true,\n  alwaysShowAllBtns: true\n};\nfunction Users() {\n  _s();\n  const [selectedRows, setSelectedRows] = useState([]);\n  const [users, setUsers] = useState([]);\n  const loggedIn = sessionStorage.getItem('loggedIn');\n  React.useEffect(() => {\n    async function fetchData() {\n      if (!loggedIn) {\n        const loginCode = prompt('Please enter your login code');\n        if (loginCode !== credentials.loginCode) {\n          alert('Invalid login code');\n          sessionStorage.setItem('loggedIn', false);\n          return;\n        }\n      }\n      sessionStorage.setItem('loggedIn', true);\n      const users = await getAllUsers();\n      const reformedUsers = users.map(user => {\n        return {\n          ...user.data,\n          id: user.ref.id\n        };\n      });\n      setUsers(reformedUsers);\n    }\n    fetchData();\n  }, [loggedIn]);\n  const handleSelect = (row, isSelected) => {\n    if (isSelected) {\n      setSelectedRows([...selectedRows, row]);\n    } else {\n      setSelectedRows(selectedRows.filter(r => r.id !== row.id));\n    }\n  };\n  const handleExportClick = () => {\n    const selectedData = selectedRows.length > 0 ? selectedRows : users;\n    const sheetData = [['First Name', 'Middle Name', 'Last Name', 'Gender', 'Date of Birth', 'Email', 'Phone', 'Address', 'Bank Name', 'Account Number', 'Account Name'], ...selectedData.map(d => [d.firstName, d.middleName, d.lastName, d.gender, d.dob, d.email, d.phone, d.address, d.bankName, d.accountNumber, d.accountName])];\n    const sheetName = 'Purple Data';\n    const workbook = XLSX.utils.book_new();\n    const worksheet = XLSX.utils.aoa_to_sheet(sheetData);\n    XLSX.utils.book_append_sheet(workbook, worksheet, sheetName);\n    const excelBuffer = XLSX.write(workbook, {\n      bookType: 'xlsx',\n      type: 'array'\n    });\n    saveAs(new Blob([excelBuffer], {\n      type: 'application/octet-stream'\n    }), `${sheetName}.xlsx`);\n  };\n  setTimeout(() => {\n    sessionStorage.clear();\n  }, 1800000);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mt-5 card\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row card-body\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-2\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-warning btn-sm\",\n            onClick: () => {\n              sessionStorage.clear();\n              window.location.reload();\n            },\n            children: \"Logout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mt-5 card\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row card-body\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-12\",\n          children: [users.length === 0 && /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 48\n          }, this), users.length > 0 && /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Entries\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 46\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-success btn btn-sm\",\n            style: {\n              marginBottom: '20px'\n            },\n            onClick: handleExportClick,\n            children: \"Export to Excel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(BootstrapTable, {\n            keyField: \"id\",\n            data: users,\n            columns: columns,\n            selectRow: {\n              mode: 'checkbox',\n              onSelect: handleSelect\n            },\n            pagination: paginationFactory(options),\n            wrapperClasses: \"table-responsive\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 19\n    }, this)]\n  }, void 0, true);\n}\n_s(Users, \"bHa78TjZFeey2Sz6TMx0BEQ5bc0=\");\n_c = Users;\nexport default Users;\nvar _c;\n$RefreshReg$(_c, \"Users\");","map":{"version":3,"names":["React","useState","BootstrapTable","paginationFactory","Button","saveAs","XLSX","getAllUsers","credentials","loginCode","columns","dataField","text","options","sizePerPage","hideSizePerPage","hidePageListOnlyOnePage","alwaysShowAllBtns","Users","selectedRows","setSelectedRows","users","setUsers","loggedIn","sessionStorage","getItem","useEffect","fetchData","prompt","alert","setItem","reformedUsers","map","user","data","id","ref","handleSelect","row","isSelected","filter","r","handleExportClick","selectedData","length","sheetData","d","firstName","middleName","lastName","gender","dob","email","phone","address","bankName","accountNumber","accountName","sheetName","workbook","utils","book_new","worksheet","aoa_to_sheet","book_append_sheet","excelBuffer","write","bookType","type","Blob","setTimeout","clear","window","location","reload","marginBottom","mode","onSelect"],"sources":["/Users/godfredakpan/Documents/projects/AgentReg/src/components/all_users.js"],"sourcesContent":["import React, { useState } from 'react';\nimport BootstrapTable from 'react-bootstrap-table-next';\nimport paginationFactory from 'react-bootstrap-table2-paginator';\nimport 'react-bootstrap-table-next/dist/react-bootstrap-table2.min.css';\nimport { Button } from 'react-bootstrap';\nimport { saveAs } from 'file-saver';\nimport * as XLSX from 'xlsx';\nimport getAllUsers from '../fauna/getUsers';\n\n\nconst credentials = {\n    loginCode: 'pUrpLeQWERTY20',\n}\n\nconst columns = [\n    {\n        dataField: 'fname',\n        text: 'First Name',\n    },\n    {\n        dataField: 'mname',\n        text: 'Middle Name',\n    },\n    {\n        dataField: 'lname',\n        text: 'Last Name',\n    },\n    {\n        dataField: 'gender',\n        text: 'Gender',\n    },\n    {\n        dataField: 'dob',\n        text: 'Date of Birth',\n    },\n    {\n        dataField: 'email',\n        text: 'Email',\n    },\n    {\n        dataField: 'phone',\n        text: 'Phone',\n    },\n    {\n        dataField: 'address',\n        text: 'Address',\n    },\n    {\n        dataField: 'bank_name',\n        text: 'Bank Name',\n    },\n    {\n        dataField: 'account_number',\n        text: 'Acct Number',\n    },\n    {\n        dataField: 'account_name',\n        text: 'Account Name',\n    },\n\n];\n\n\nconst options = {\n    sizePerPage: 10,\n    hideSizePerPage: false,\n    hidePageListOnlyOnePage: true,\n    alwaysShowAllBtns: true,\n};\n\nfunction Users() {\n    const [selectedRows, setSelectedRows] = useState([]);\n    const [users, setUsers] = useState([]);\n\n    const loggedIn = sessionStorage.getItem('loggedIn');\n\n    React.useEffect(() => {\n        async function fetchData() {\n            if (!loggedIn) {\n                const loginCode = prompt('Please enter your login code');\n                if (loginCode !== credentials.loginCode) {\n                    alert('Invalid login code');\n                    sessionStorage.setItem('loggedIn', false);\n                    return;\n                }\n            }\n            sessionStorage.setItem('loggedIn', true);\n            const users = await getAllUsers();\n            const reformedUsers = users.map((user) => {\n                return { ...user.data, id: user.ref.id };\n            });\n            setUsers(reformedUsers);\n        }\n        fetchData();\n    }, [loggedIn])\n\n    const handleSelect = (row, isSelected) => {\n        if (isSelected) {\n            setSelectedRows([...selectedRows, row]);\n        } else {\n            setSelectedRows(selectedRows.filter((r) => r.id !== row.id));\n        }\n    };\n\n\n    const handleExportClick = () => {\n        const selectedData = selectedRows.length > 0 ? selectedRows : users;\n\n        const sheetData = [\n            ['First Name', 'Middle Name', 'Last Name', 'Gender', 'Date of Birth', 'Email', 'Phone', 'Address', 'Bank Name', 'Account Number', 'Account Name'],\n            ...selectedData.map((d) => [d.firstName, d.middleName, d.lastName, d.gender, d.dob, d.email, d.phone, d.address, d.bankName, d.accountNumber, d.accountName]),\n        ];\n\n        const sheetName = 'Purple Data';\n\n        const workbook = XLSX.utils.book_new();\n        const worksheet = XLSX.utils.aoa_to_sheet(sheetData);\n\n        XLSX.utils.book_append_sheet(workbook, worksheet, sheetName);\n\n        const excelBuffer = XLSX.write(workbook, {\n            bookType: 'xlsx',\n            type: 'array',\n        });\n\n        saveAs(\n            new Blob([excelBuffer], { type: 'application/octet-stream' }),\n            `${sheetName}.xlsx`\n        );\n    };\n\n\n    setTimeout(() => {\n        sessionStorage.clear();\n    }, 1800000);\n\n    return (\n        <>\n            <div className=\"container mt-5 card\">\n                <div className=\"row card-body\" >\n                    <div className=\"col-md-2\" >\n                    <button className=\"btn btn-warning btn-sm\" onClick={() => { sessionStorage.clear(); window.location.reload(); } }>Logout</button>\n                    </div>\n                </div>\n            </div><div className=\"container mt-5 card\">\n                <div className=\"row card-body\">\n                    <div className=\"col-md-12\">\n                        {users.length === 0 && <h4>Loading...</h4>}\n                        {users.length > 0 && <h4>Entries</h4>}\n                        <button className='btn-success btn btn-sm' style={{ marginBottom: '20px' }} onClick={handleExportClick}>Export to Excel</button>\n                        <BootstrapTable\n                            keyField=\"id\"\n                            data={users}\n                            columns={columns}\n                            selectRow={{ mode: 'checkbox', onSelect: handleSelect }}\n                            pagination={paginationFactory(options)}\n                            wrapperClasses=\"table-responsive\" />\n                    </div>\n                </div>\n            </div></>\n    );\n}\n\nexport default Users;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}